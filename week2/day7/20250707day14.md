# 14일차(2025.07.07)
## 개요
- EDA 레포트 제작
## 레포트 내용
**1. 챗지피티를 활용한 데이터 셋(헬스장 데이터) 생성**
```python
import pandas as pd
import numpy as np
import seaborn as sns
import matplotlib.pyplot as plt
import matplotlib

df=pd.read_csv('C:/portfolio/code/week2/day7/gym_members.csv')
df=df.set_index('이름')

###
   성별  나이  운동경력  주당운동일수   선호기구   보충제    월구독료  건강점수  인바디체지방률   근육량  식단유지여부
이름
지훈  남  21     7       5  레그프레스   안 씀  118603  82.4     25.8  68.3       1
민서  여  31     2       5     덤벨   안 씀   92256  67.2     31.8  49.7       1
서준  남  25     4       5    케틀벨  크레아틴  129135  68.8     30.1  55.6       1
예은  남  21     9       1    케틀벨  크레아틴   75222  63.5     14.7  61.1       0
도윤  남  20     2       3  스미스머신  크레아틴  117373  41.4     32.3  50.9       1
수아  여  31    10       5    케틀벨   단백질  119575  45.9     23.5  69.2       0
현우  남  31     9       4  스미스머신   안 씀  136354  41.7     30.2  68.9       0
하은  남  36    10       6     덤벨  크레아틴  124651  75.0     32.4  47.6       1
태현  남  29     5       1  레그프레스  크레아틴  103335  57.3     18.0  54.9       0
지아  여  35     2       1  레그프레스   단백질   50965  68.0     12.8  49.0       0
서윤  남  34     4       3  레그프레스  크레아틴   64538  89.9     15.7  48.5       0
하진  남  34     7       1    케틀벨   단백질  148066  53.7     20.7  41.1       1
민재  남  38     8       1     덤벨  BCAA  110592  62.6     30.5  58.3       1
윤아  남  31     3       5    케틀벨  크레아틴  138018  81.6     31.5  55.1       0
지후  여  39     1       3    케틀벨  BCAA   48110  52.6     10.2  41.5       1
채원  남  22     4       5     덤벨   단백질  119309  44.2     22.8  48.4       1
준서  여  24     2       6     덤벨   안 씀   67266  55.9     20.4  67.2       1
다은  여  38     8       7     덤벨  크레아틴   92992  48.9     15.6  47.2       1
현서  여  26     4       6     덤벨   단백질  122948  91.1     13.0  44.3       0
예진  남  28     2       7  레그프레스   안 씀  138806  84.4     18.4  54.7       0
```
---
**2. 기본 정보 요약(eda_summary)**
- `.shape`, `.info()`, `.describe()`로 구조 파악
- 결측치 비율 탐색
- `value_counts()`로 범주형 분포 요약

```python
def eda_summary(df):
    print('[행 x 열]')
    print(df.shape)

    print('\n [기본 정보]')
    print(df.info())

    print('\n [통계 요약]')
    print(df.describe())

    print('\n [결측치 비율]')
    print((df.isnull().sum() / len(df)*100).sort_values(ascending=False))

    print('\n [범주형 통계]')
    for col in df.select_dtypes(include='object'):
        print(f'[{col} 통계]')
        print(df[col].value_counts())
```
---
**3. 수치형 변수 자동 시각화(eda_plot)**
- `histplot`, `boxplot`사용
```python
def eda_plot(df):
    matplotlib.rc('font', family=('Malgun Gothic'))
    numeric_cols = df.select_dtypes(include='number').columns

    for col in numeric_cols:
        
        #히스토그램
        plt.subplot(1,2,1)
        sns.histplot(df[col], kde=True)
        plt.title(f'{col} 히스토그램')

        #박스플롯
        plt.subplot(1,2,2)
        sns.boxplot(y=df[col])
        plt.title(f'{col} 박스플롯')

        plt.tight_layout()
        plt.show()
```
[건강점수 그래프](건강점수그래프.png)\
[근육량 그래프](근육량그래프.png)\
[나이 그래프](나이그래프.png)\
[식단유지여부 그래프](식단유지여부그래프.png)\
[운동경력 그래프](운동경력그래프.png)\
[월 구독료 그래프](월구독료그래프.png)\
[인바디 체지방률 그래프](인바디체지방률그래프.png)\
[주당 운동 일수 그래프](주당운동일수그래프.png)

---
**4. 상관관계 분석(eda_corr)**
- `heatmap()` 시각화
```python
def eda_corr():
    plt.figure(figsize=(10,4))
    numeric_cols=df.select_dtypes(include='number')
    corr=numeric_cols.corr()

    sns.hitmap(corr, annot=True, cmap='coolwarm')
    plt.title('헬스장 상관분석')
    plt.show()
```
[헬스장 상관분석 히트맵](헬스장상관분석.png)

---

**5. 보충제 섭취 여부 기반 분석**
- 보충제 섭취 여부 파생변수 생성
```python
df['보충제 섭취 여부']=np.where(df['보충제']=='안 씀', '사용안함', '사용함')
```
- `groupby()`에 따른 분석
```python
df.groupby('보충제 섭취 여부')['근육량'].agg(['mean','min','max', 'std'])

#결과
                mean   min   max       std
보충제 섭취 여부
사용안함       61.760000  49.7  68.9  8.925133
사용함        51.513333  41.1  69.2  7.615479
```
```python
df.groupby('보충제 섭취 여부')['건강점수'].agg(['mean', 'min', 'max', 'std'])

#결과
                mean   min   max        std
보충제 섭취 여부
사용안함       66.320000  41.7  84.4  18.034328
사용함        62.966667  41.4  91.1  16.036951
```

- `subplot()`을 활용한 분석
```python
def groupby_supplement(df) :
    plt.figure(figsize=(10,4))

    plt.subplot(1,3,1)
    plt.title('보충제 섭취 여부에 따른 근육량')
    sns.boxplot(data=df, x='보충제 섭취 여부', y='근육량')

    plt.subplot(1,3,2)
    plt.title('보충제 섭취 여부에 따른 건강점수')
    sns.boxplot(data=df, x='보충제 섭취 여부', y='건강점수')

    plt.subplot(1,3,3)
    plt.title('보충제 섭취 여부에 따른 체지방률')
    sns.boxplot(data=df, x='보충제 섭취 여부', y='인바디체지방률')

    plt.tight_layout()
    plt.show()
```
[보충제 섭취 여부에 따른 그래프](보충제섭취여부에따른그래프.png)

---
**6. 성별에 따른 분석**
- `boxplot()`을 활용한 분석
```python
def groupby_sex(df):
    plt.figure(figsize = (10,4))

    plt.subplot(1,3,1)
    sns.boxplot(data=df, x='성별', y='근육량')
    plt.title('성별에 따른 근육량')

    plt.subplot(1,3,2)
    sns.boxplot(data=df, x='성별', y='건강점수')
    plt.title('성별에 따른 건강점수')

    plt.subplot(1,3,3)
    sns.boxplot(data=df, x='성별', y='인바디체지방률')
    plt.title('성별에 따른 체지방률')

    plt.tight_layout()
    plt.show()
```
[성별에 따른 그래프](성별에따른그래프.png)

---

**7. 인사이트 분석**
1) 상관분석에 따른 해석
```
유의미한 상관관계가 보이지 않는다.

음의 상관관계를 띠는 변수들은 -1과는 수치가 매우 떨어져있다. 때문에 음의 상관관계가 유의미한 변수는 존재하지 않는다고 볼 수 있다.

양의 상관관계도 마찬가지이다. 대다수 변수들이 1과는 매우 떨어진 값을 보인다. 그나마 월구독료와 체지방률이 0.58이라는 상관계수 값을 보인다. 이를 통해 '월 구독료를 많이 지불할 수록 체지방률이 높아진다'라는 추론을 할 수 있지만. 상관계수 값이 크지 않아 크게 신뢰할 수 없다.
```
2) 보충제 섭취 여부에 따른 해석
```
수치형 변수 중에서 근육량, 건강점수, 체지방률을 기준으로 비교했다.

기존예측
- 보충제 섭취를 한 그룹이 더 근육량이 높다.
- 보충제 섭취를 한 그룹이 건강점수가 더 높다.
- 보충제 섭취를 한 그룹이 체지방률이 낮다.

결과해석
1. 근육량
보충제 섭취를 한 그룹의 근육량이 섭취를 하지 않은 그룹보다 현저히 적게 나왔다.

2. 건강점수
보충제 섭취를 한 그룹의 건강점수가 대체적으로 섭취하지 않은 그룹보다 낮게 위치한다.

3. 체지방률
보충제 섭취를 한 그룹의 체지방률이 섭취하지 않은 그룹보다 대체적으로 낮게 분포한다.

4. 전체적인 총평
예측값과 실제 결과가 상당히 다르게 제시된다.

 (1). 표본수가 매우 적다. 전체 표본은 20명이기에 유의미한 결과가 나올 정도로 표본수가 많지 않다.

 (2). 다양한 변수 존재. 실제 헬스데이터는 단순히 '보충제 섭취'만으로 결과값이 예측되는 것이 아닌 키, 몸무게, bmi 등 다양한 변수가 작용한다. 따라서 단순히 x값에 따른 y값으로 보기엔 타당하지 않다.
```

3) 성별에 따른 해석
```
수치형 변수 중에서 근육량, 건강점수, 체지방률을 기준으로 비교했다.

기존예측
1. 근육량은 남자가 여자보다 많을 것이다.
2. 건강점수는 비슷하게 나올 것이다.
3. 체지방률은 여자가 남자보다 많을 것이다.

결과해석
1. 근육량
대체적으로 남자가 여자보다 많은 근육량을 나타낸다

2. 건강점수
남자가 여자보다 대체로 더 높은 건강점수를 나타낸다.

3. 체지방률
남자가 여자보다 높은 체지방률을 기록한다.

4. 전체적인 총평
근육량은 기존예측과 맞아떨어졌지만, 건강점수와 체지방률은 예측과 벗어났다.

 (1). 생성한 자료가 랜덤한 수치를 대입한 자료라서 예측과 벗어난다.
 (2). 보충제 섭취와 마찬가지로 표본수가 매우 적어 유의미한 결과가 나타나지 않는다.
```